@model IEnumerable<StudentTracker.Models.Faculty>

@{
    ViewData["Title"] = "Факультеты";
}

<style>
    .accordion {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
        transition: 0.4s;
    }

    .active, .accordion:hover {
        background-color: #ccc; 
    }

    .panel {
        padding: 0 18px;
        /* display: none; */
        background-color: white;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.2s ease-out;
    }
</style>

<p align="right">
    <a asp-action="Create">Добавить факультет</a>
</p>
@foreach (var faculty in Model) {
        <tr>
            <button class="accordion">
                @Html.DisplayFor(modelItem => faculty.FacultyName) 
                <div align="right">
                    <a asp-action="Edit" asp-route-id="@faculty.FacultyID">Изменить</a> |
                    <a asp-controller="Specialties" asp-action="Create" asp-route-id="@faculty.FacultyID">Добавить специальность</a> | 
                    <a asp-action="Delete" asp-route-id="@faculty.FacultyID">Удалить</a>
                </div>
            </button>
            <div class="panel">
                <table class="table">
                    <thead>
                    </thead>
                    <tbody>
                        @foreach(var specialty in faculty.Specialties)
                        {
                            <tr>
                                <td>@specialty.SpecialtyName</td>
                                <td align="right">
                                    <a asp-area="" asp-controller="Specialties" asp-action="Edit" asp-route-id="@specialty.SpecialtyID">Изменить</a> | 
                                    <a asp-area="" asp-controller="Specialties" asp-action="Delete" asp-route-id="@specialty.SpecialtyID">Удалить</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </tr>
}


<script>
    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            } 
        });
    }
</script>
